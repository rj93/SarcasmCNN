<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<script src="js/jquery-3.2.1.min.js"></script>
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<script src="js/bootstrap.min.js"></script>

		<link href="css/website.css" rel="stylesheet">

		<title>Sarcasm Detector</title>
	</head>

	<body>

		<div class="container">
			<h1>Sarcasm Detector</h1>
			<div class="row">
				<div class="input-group col-md-8 col-md-offset-2">
					<input type="text" class="form-control" placeholder="Sentence" id="sentence-text" aria-describedby="sentence-text-addon">
					<span class="btn btn-primary input-group-addon" id="sentence-text-addon" onclick="predict()">Predict</span>
				</div>
			</div>

			<div class="row">
				<div class="hidden col-md-offset-2" id="prediction">
					<div class="row">
						<span id="isSarcarstic"></span>
					</div>
					<div class="row">
						<span>Probability Positive: <span id="pPos"></span></span>
					</div>
					<div class="row">
						<span>Probability Negative: <span id="pNeg"></span></span>
					</div>
				</div>
			</div>
		</div>

		<script>
			var baseUrl = "http://localhost:8080/api/";

			function predict(){

				console.log("predict");
				var sentence = $('#sentence-text').val()
				console.log(sentence)

				if (sentence.length > 0){
					$.ajax({
						type: "POST",
						url: baseUrl + "predict/",
						data: { 'sentence' : sentence },
						success: function(data) {
							update(data); 
						}, error: function(jqXHR, textStatus, errorThrown) {
							console.log(errorThrown); 
						}
					});
				} else {
					console.log("Sentence length cannot be zero");
				}
			}

			function update(data) {
				console.log(data);
				$("#prediction").removeClass("hidden");

				var text;
				if (data.sarcastic){
					text = "Text is sarcastic";
				} else {
					text = "Text isn't sarcastic";
				}
				$("#isSarcarstic").html(text);
				$("#pPos").html(data.probabilityPositive);
				$("#pNeg").html(data.probabilityNegative);
			}
		</script>

	</body>
</html>
